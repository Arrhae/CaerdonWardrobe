<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
	<Script file="CaerdonWardrobe.lua" />

	<Script file="features\Loot.lua" />
	<Script file="features\GroupLoot.lua" />
	<Script file="features\Mail.lua" />
    
	<!-- This is a (mostly) direct copy of EmbeddedItemTooltip in GameTooltip.xml -->
	<!-- The only custom change is the call to SetOwner in OnLoad -->
	<!-- If I can figure out a way to inherit from that, I'd rather do that. -->
	<GameTooltip name="CaerdonWardrobeFrameTooltip" inherits="GameTooltipTemplate" parent="UIParent">
		<Layers>
			<Layer level="ARTWORK">
				<FontString parentKey="BottomFontString" font="GameFontNormal" justifyH="LEFT" justifyV="TOP" hidden="true">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMLEFT" x="10" y="10"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Frame parentKey="ItemTooltip" inherits="InternalEmbeddedItemTooltipTemplate" hidden="true">
				<Size x="100" y="100"/>
				<Anchors>
					<Anchor point="BOTTOMLEFT" relativeKey="$parent.BottomFontString" relativePoint="TOPLEFT" x="0" y="10"/>
				</Anchors>
				<Scripts>
					<OnLoad inherit="prepend">
						self.Tooltip.shoppingTooltips = { ShoppingTooltip1, ShoppingTooltip2 };
					</OnLoad>
				</Scripts>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad inherit="prepend">
				self:SetOwner(WorldFrame, "ANCHOR_NONE")
				self.shoppingTooltips = { ShoppingTooltip1, ShoppingTooltip2 };
				self.updateTooltip = TOOLTIP_UPDATE_TIME;
			</OnLoad>
			<OnUpdate function="GameTooltip_OnUpdate"/>
			<OnShow inherit="prepend">
				self.recalculatePadding = true;
			</OnShow>
			<OnHide inherit="prepend">
				self.ItemTooltip:Hide();
				self:SetPadding(0, 0, 0, 0);
				self.BottomFontString:Hide();
			</OnHide>
			<OnSizeChanged inherit="prepend">
				self.recalculatePadding = true;
			</OnSizeChanged>
		</Scripts>
	</GameTooltip>

    <Frame name="CaerdonWardrobeFrame" secureMixin="CaerdonWardrobeMixin">
		<Scripts>
			<OnLoad method="OnLoad"/>
			<OnEvent method="OnEvent"/>
            <OnUpdate method="OnUpdate"/>
		</Scripts>
    </Frame>
</Ui>
